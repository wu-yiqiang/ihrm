{"remainingRequest":"C:\\Users\\windows\\project\\ihrm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\project\\ihrm\\src\\views\\import\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\project\\ihrm\\src\\views\\import\\index.vue","mtime":1616830911506},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQovLyDov5nph4zlj6/ku6Xlr7zlhaXlhbbku5bmlofku7bvvIjmr5TlpoLvvJrnu4Tku7bvvIzlt6Xlhbdqc++8jOesrOS4ieaWueaPkuS7tmpz77yManNvbuaWh+S7tu+8jOWbvueJh+aWh+S7tuetieetie+8iQ0KaW1wb3J0IHtpbXBvcnRFbXBsb3llZX0gZnJvbSAnQC9hcGkvZW1wbG95ZWVzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnJywNCiAgY29tcG9uZW50czoge30sDQogIG1vZGVsOiB7fSwgLy8g5a6a5LmJ5bGe5oCnDQogIHByb3BzOiB7fSwNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHt9DQogIH0sDQogIGJlZm9yZUNyZWF0ZSAoKSB7fSwgLy8g55Sf5ZG95ZGo5pyfIC0g5Yib5bu65LmL5YmNDQogIGNyZWF0ZWQgKCkge30sIC8vIOeUn+WRveWRqOacnyAtIOWIm+W7uuWujOaIkO+8iOWPr+S7peiuv+mXruW9k+WJjXRoaXPlrp7kvovvvIkNCiAgYmVmb3JlTW91bnQgKCkge30sIC8vIOeUn+WRveWRqOacnyAtIOaMgui9veS5i+WJjQ0KICBtb3VudGVkICgpIHt9LCAvLyDnlJ/lkb3lkajmnJ8gLSDmjILovb3lrozmiJDvvIjlj6/ku6Xorr/pl65ET03lhYPntKDvvIkNCiAgY29tcHV0ZWQ6IHt9LCAvLyDorqHnrpflsZ7mgKfvvIzkvJrnm5HlkKzkvp3otZblsZ7mgKflgLzpmo/kuYvlj5jljJYNCiAgd2F0Y2g6IHt9LCAvLyDnm5HmjqdkYXRh5Lit55qE5pWw5o2u5Y+Y5YyWDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBzdWNjZXNzKHtoZWFkZXIscmVzdWx0c30pIHsNCiAgICAgIGNvbnN0IHVzZXJSZWxhdGlvbnMgPSB7DQogICAgICAgICflhaXogYzml6XmnJ8nOiAndGltZU9mRW50cnknLA0KICAgICAgICAn5omL5py65Y+3JzonbW9iaWxlJywNCiAgICAgICAgJ+Wnk+WQjSc6ICd1c2VybmFtZScsDQogICAgICAgICfovazmraPml6XmnJ8nOiAnY29ycmVjdGlvblRpbWUnLA0KICAgICAgICAn5bel5Y+3JzogJ3dvcmtOdW1iZXInDQogICAgICB9DQogICAgICB2YXIgbmV3QXJyID0gcmVzdWx0cy5tYXAoZWxlbWVudCA9PiB7DQogICAgICAgIHZhciB1c2VySW5mbyA9IHt9DQogICAgICAgIE9iamVjdC5rZXlzKGVsZW1lbnQpLmZvckVhY2goIGtleSA9PiB7DQogICAgICAgICAgaWYgKCB1c2VyUmVsYXRpb25zW2tleV0gPT0gJ3RpbWVPZkVudHJ5JyB8fCB1c2VyUmVsYXRpb25zW2tleV0gPT0gJ2NvcnJlY3Rpb25UaW1lJykgew0KICAgICAgICAgICAgdXNlckluZm9bdXNlclJlbGF0aW9uc1trZXldXSA9IG5ldyBEYXRlKHRoaXMuZm9ybWF0KGVsZW1lbnRba2V5XSwnLycpKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB1c2VySW5mb1t1c2VyUmVsYXRpb25zW2tleV1dID0gZWxlbWVudFtrZXldIA0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgcmV0dXJuIHVzZXJJbmZvDQogICAgICB9KTsNCiAgICAgIGF3YWl0IGltcG9ydEVtcGxveWVlKG5ld0FycikNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5ZGY5bel5ZCN5Y2V5a+85YWl5oiQ5YqfIScpDQogICAgICB0aGlzLiRyb3V0ZXIuYmFjaygpDQogICAgfSwNCiAgICBmb3JtYXREYXRlKG51bWIsIGZvcm1hdCkgew0KICAgICAgY29uc3QgdGltZSA9IG5ldyBEYXRlKChudW1iIC0gMSkgKiAyNCAqIDM2MDAwMDAgKyAxKQ0KICAgICAgdGltZS5zZXRZZWFyKHRpbWUuZ2V0RnVsbFllYXIoKSAtIDcwKQ0KICAgICAgY29uc3QgeWVhciA9IHRpbWUuZ2V0RnVsbFllYXIoKSArICcnDQogICAgICBjb25zdCBtb250aCA9IHRpbWUuZ2V0TW9udGgoKSArIDEgKyAnJw0KICAgICAgY29uc3QgZGF0ZSA9IHRpbWUuZ2V0RGF0ZSgpIC0gMSArICcnDQogICAgICBpZiAoZm9ybWF0ICYmIGZvcm1hdC5sZW5ndGggPT09IDEpIHsNCiAgICAgICAgcmV0dXJuIHllYXIgKyBmb3JtYXQgKyBtb250aCArIGZvcm1hdCArIGRhdGUNCiAgICAgIH0NCiAgICAgIHJldHVybiB5ZWFyICsgKG1vbnRoIDwgMTAgPyAnMCcgKyBtb250aCA6IG1vbnRoKSArIChkYXRlIDwgMTAgPyAnMCcgKyBkYXRlIDogZGF0ZSkNCiAgICB9DQogIH0sIC8vIOaWueazlembhuWQiA0KICBiZWZvcmVVcGRhdGUgKCkge30sIC8vIOeUn+WRveWRqOacnyAtIOabtOaWsOS5i+WJjQ0KICB1cGRhdGVkICgpIHt9LCAvLyDnlJ/lkb3lkajmnJ8gLSDmm7TmlrDkuYvlkI4NCiAgYmVmb3JlRGVzdHJveSAoKSB7fSwgLy8g55Sf5ZG95ZGo5pyfIC0g6ZSA5q+B5LmL5YmNDQogIGRlc3Ryb3llZCAoKSB7fSwgLy8g55Sf5ZG95ZGo5pyfIC0g6ZSA5q+B5a6M5oiQDQogIGFjdGl2YXRlZCAoKSB7fSAvLyDlpoLmnpzpobXpnaLmnIlrZWVwLWFsaXZl57yT5a2Y5Yqf6IO977yM6L+Z5Liq5Ye95pWw5Lya6Kem5Y+RDQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/import","sourcesContent":["<template>\r\n <uploadExcel :on-success=\"success\"></uploadExcel>\r\n</template>\r\n\r\n<script>\r\n// 这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\r\nimport {importEmployee} from '@/api/employees'\r\nexport default {\r\n  name: '',\r\n  components: {},\r\n  model: {}, // 定义属性\r\n  props: {},\r\n  data () {\r\n    return {}\r\n  },\r\n  beforeCreate () {}, // 生命周期 - 创建之前\r\n  created () {}, // 生命周期 - 创建完成（可以访问当前this实例）\r\n  beforeMount () {}, // 生命周期 - 挂载之前\r\n  mounted () {}, // 生命周期 - 挂载完成（可以访问DOM元素）\r\n  computed: {}, // 计算属性，会监听依赖属性值随之变化\r\n  watch: {}, // 监控data中的数据变化\r\n  methods: {\r\n    async success({header,results}) {\r\n      const userRelations = {\r\n        '入职日期': 'timeOfEntry',\r\n        '手机号':'mobile',\r\n        '姓名': 'username',\r\n        '转正日期': 'correctionTime',\r\n        '工号': 'workNumber'\r\n      }\r\n      var newArr = results.map(element => {\r\n        var userInfo = {}\r\n        Object.keys(element).forEach( key => {\r\n          if ( userRelations[key] == 'timeOfEntry' || userRelations[key] == 'correctionTime') {\r\n            userInfo[userRelations[key]] = new Date(this.format(element[key],'/'))\r\n          } else {\r\n            userInfo[userRelations[key]] = element[key] \r\n          }\r\n        })\r\n        return userInfo\r\n      });\r\n      await importEmployee(newArr)\r\n      this.$message.success('员工名单导入成功!')\r\n      this.$router.back()\r\n    },\r\n    formatDate(numb, format) {\r\n      const time = new Date((numb - 1) * 24 * 3600000 + 1)\r\n      time.setYear(time.getFullYear() - 70)\r\n      const year = time.getFullYear() + ''\r\n      const month = time.getMonth() + 1 + ''\r\n      const date = time.getDate() - 1 + ''\r\n      if (format && format.length === 1) {\r\n        return year + format + month + format + date\r\n      }\r\n      return year + (month < 10 ? '0' + month : month) + (date < 10 ? '0' + date : date)\r\n    }\r\n  }, // 方法集合\r\n  beforeUpdate () {}, // 生命周期 - 更新之前\r\n  updated () {}, // 生命周期 - 更新之后\r\n  beforeDestroy () {}, // 生命周期 - 销毁之前\r\n  destroyed () {}, // 生命周期 - 销毁完成\r\n  activated () {} // 如果页面有keep-alive缓存功能，这个函数会触发\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n</style>\r\n"]}]}