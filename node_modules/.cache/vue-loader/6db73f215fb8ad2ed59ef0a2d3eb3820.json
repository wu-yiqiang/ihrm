{"remainingRequest":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Project\\ihrm\\src\\views\\setting\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\Project\\ihrm\\src\\views\\setting\\index.vue","mtime":1616675945722},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldFJvbGVMaXN0LGdldENvbXBhbnlJbmZvLGRlbGV0ZVJvbGV9IGZyb20gJ0AvYXBpL3NldHRpbmcnDQppbXBvcnQge21hcEdldHRlcnN9IGZyb20gJ3Z1ZXgnDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgcGFnZTp7DQogICAgICAgIHBhZ2U6MSwNCiAgICAgICAgcGFnZXNpemU6MiwNCiAgICAgICAgdG90YWw6MCAvLyDmgLvmlbANCiAgICAgIH0sDQogICAgICBhY3RpdmVOYW1lOiAnZmlyc3QnLA0KICAgICAgZm9ybURhdGU6IHsNCiAgICAgICAgLy8g5YWs5Y+45L+h5oGvDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWydjb21wYW55SWQnXSkNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFJvbGVzTGlzdCgpDQogICAgdGhpcy5nZXRDb21wYW55SW5mbygpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBnZXRSb2xlc0xpc3QoKSB7DQogICAgICBjb25zdCB7dG90YWwscm93c309IGF3YWl0IGdldFJvbGVMaXN0KHRoaXMucGFnZSkNCiAgICAgIHRoaXMubGlzdCA9IHJvd3MNCiAgICAgIHRoaXMucGFnZS50b3RhbCA9IHRvdGFsDQogICAgfSwNCiAgICAvKiDliIbpobUgKi8NCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlIChuZXdQYWdlKSB7DQogICAgICB0aGlzLnBhZ2UucGFnZSA9IG5ld1BhZ2UNCiAgICAgIHRoaXMuZ2V0Um9sZXNMaXN0KCkNCiAgICB9LA0KICAgIGFzeW5jIGdldENvbXBhbnlJbmZvICgpIHsNCiAgICAgIHRoaXMuZm9ybURhdGUgPSBhd2FpdCBnZXRDb21wYW55SW5mbyh0aGlzLmNvbXBhbnlJZCkNCiAgICB9LA0KICAgIC8qIOWIoOmZpOinkuiJsiAqLw0KICAgIGFzeW5jIGRlbGV0ZVJvbGUoaWQpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeinkuiJsiwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICB9KS50aGVuKCBhc3luYyAoKSA9PiB7DQogICAgICAgICAgYXdhaXQgZGVsZXRlUm9sZShpZCkNCiAgICAgICAgICAvLyDph43mlrDliqDovb3mlbDmja4NCiAgICAgICAgICB0aGlzLmdldFJvbGVzTGlzdCgpDQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk6KeS6Imy5oiQ5YqfIScNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcNCiAgICAgICAgICB9KSAgICAgIA0KICAgICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/setting","sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <div class=\"app-container\">\r\n      <el-card>\r\n        <!-- 标签页 -->\r\n        <el-tabs v-model='activeName' >\r\n          <!-- 角色设置 -->\r\n          <el-tab-pane label=\"角色设置\" name=\"first\" >\r\n            <el-row>\r\n              <el-button type=\"primary\" icon=\"el-icon-plus\" size='small'>\r\n                新增角色\r\n              </el-button>\r\n            </el-row>\r\n            <el-table  :data=\"list\">\r\n              <el-table-column  width=\"120\"  type=\"index\" label=\"序号\" align=\"center\"></el-table-column>\r\n              <el-table-column prop=\"name\" label=\"角色名称\" width=\"240\" align=\"center\"></el-table-column>    \r\n              <el-table-column prop=\"description\" label=\"描述\" align=\"center\"></el-table-column>    \r\n              <el-table-column label=\"操作\" align=\"center\">\r\n                <template slot-scope=\"scoped\">\r\n                  <el-button type=\"success\" size=\"mini\">分配权限</el-button>\r\n                  <el-button type=\"primary\" size=\"mini\">编辑</el-button>\r\n                  <el-button type=\"danger\" size=\"mini\" @click=\"deleteRole(scoped.row.id)\">删除</el-button>\r\n                </template>\r\n              </el-table-column>    \r\n\r\n            </el-table>\r\n            <!-- 分页组件 -->\r\n            <el-row type='flex' justify=\"center\" style=\"height:60px\">\r\n              <el-pagination layout=\"prev, pager, next\" :total=\"page.total\"  :page-size=\"page.pagesize\" :current-page=\"page.page\" @current-change=\"handleCurrentChange\"></el-pagination>\r\n            </el-row>\r\n            <!-- /分页组件 -->\r\n          </el-tab-pane>\r\n          <!-- 角色设置 -->\r\n          <!-- 公司信息 -->\r\n          <el-tab-pane label=\"公司信息\" name=\"second\">\r\n            <el-alert title=\"消息提示的文案\" type=\"info\"></el-alert>\r\n            <el-form label-width=\"120px\"  >\r\n              <el-form-item  label=\"企业名称\" style=\"width:400px\" >\r\n                <el-input disabled v-model=\"formDate.name\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"公司地址\" style=\"width:400px\">\r\n                <el-input disabled v-model=\"formDate.companyAddress\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"电话\" style=\"width:400px\">\r\n                <el-input disabled v-model=\"formDate.companyPhone\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"邮箱\" style=\"width:400px\">\r\n                <el-input disabled v-model=\"formDate.mailbox\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"备注\" style=\"width:400px\">\r\n                <el-input disabled v-model=\"formDate.remarks\"></el-input>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-tab-pane>\r\n          <!-- /公司信息 -->\r\n        </el-tabs>\r\n        <!-- /标签页 -->\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getRoleList,getCompanyInfo,deleteRole} from '@/api/setting'\r\nimport {mapGetters} from 'vuex'\r\nexport default {\r\n  data() {\r\n    return {\r\n      list: [],\r\n      page:{\r\n        page:1,\r\n        pagesize:2,\r\n        total:0 // 总数\r\n      },\r\n      activeName: 'first',\r\n      formDate: {\r\n        // 公司信息\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['companyId'])\r\n  },\r\n  created() {\r\n    this.getRolesList()\r\n    this.getCompanyInfo()\r\n  },\r\n  methods: {\r\n    async getRolesList() {\r\n      const {total,rows}= await getRoleList(this.page)\r\n      this.list = rows\r\n      this.page.total = total\r\n    },\r\n    /* 分页 */\r\n    handleCurrentChange (newPage) {\r\n      this.page.page = newPage\r\n      this.getRolesList()\r\n    },\r\n    async getCompanyInfo () {\r\n      this.formDate = await getCompanyInfo(this.companyId)\r\n    },\r\n    /* 删除角色 */\r\n    async deleteRole(id) {\r\n      this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then( async () => {\r\n          await deleteRole(id)\r\n          // 重新加载数据\r\n          this.getRolesList()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除角色成功!'\r\n          });\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })      \r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}