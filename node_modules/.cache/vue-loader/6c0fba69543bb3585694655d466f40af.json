{"remainingRequest":"C:\\Users\\windows\\project\\ihrm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\project\\ihrm\\src\\views\\permission\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\project\\ihrm\\src\\views\\permission\\index.vue","mtime":1617239109828},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldFBlcm1pc3Npb25MaXN0LGFkZFBlcm1pc3Npb24sdXBkYXRlUGVybWlzc2lvbixkZWxQZXJtaXNzaW9uLGdldFBlcm1pc3Npb25EZXRhaWx9IGZyb20gJ0AvYXBpL3Blcm1pc3Npb24nDQppbXBvcnQge3RyYW5MaXN0VG9UcmVlRGF0YX0gZnJvbSAnQC91dGlscy9pbmRleCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbGlzdDpbXSwNCiAgICAgIHNob3dEaWFsb2c6IGZhbHNlLCAvLyDlvLnlsYLmjqfliLYNCiAgICAgIGZvcm1EYXRhOiB7DQogICAgICAgIG5hbWU6ICcnLCAvLyDlkI3np7ANCiAgICAgICAgY29kZTogJycsIC8vIOagh+ivhg0KICAgICAgICBkZXNjcmlwdGlvbjogJycsIC8vIOaPj+i/sA0KICAgICAgICB0eXBlOiAnJywgLy8g57G75Z6LIOivpeexu+WeiyDkuI3pnIDopoHmmL7npLog5Zug5Li654K55Ye75re75Yqg55qE5pe25YCZ5bey57uP55+l6YGT57G75Z6L5LqGDQogICAgICAgIHBpZDogJycsIC8vIOWboOS4uuWBmueahOaYr+agkSDpnIDopoHnn6XpgZPmt7vliqDliLDlk6rkuKroioLngrnkuIvkuoYNCiAgICAgICAgZW5WaXNpYmxlOiAnMCcgLy8g5byA5ZCvDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgbmFtZTpbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiflkI3lrZfkuI3og73kuLrnqbrvvIEnLCB0cmlnZ2VyOiAnYmx1cid9DQogICAgICAgIF0sDQogICAgICAgIGNvZGU6Ww0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTon5qCH6K+G5LiN6IO95Li656m677yBJywgdHJpZ2dlcjogJ2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgfSwNCiAgICAgIHBlckRhdGE6W10sDQogICAgICBkZWZhdWx0UHJvcHM6IHt9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCl7DQogICAgdGhpcy5nZXRQZXJtaXNzaW9uTGlzdCgpDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgdGl0bGVUZXh0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuZm9ybURhdGEuaWQgPyAn57yW6L6RJyA6ICfmlrDlop4nDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgZ2V0UGVybWlzc2lvbkxpc3QoKSB7DQogICAgICB0aGlzLmxpc3QgPSB0cmFuTGlzdFRvVHJlZURhdGEoYXdhaXQgZ2V0UGVybWlzc2lvbkxpc3QoKSwwKQ0KICAgIH0sDQogICAgLyog5Yig6Zmk5p2D6ZmQICovDQogICAgYnRuRGVsZXRlIChpZCkgew0KICAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeadg+mZkCwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsNCiAgICAgICAgICBhd2FpdCBkZWxQZXJtaXNzaW9uKGlkKQ0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnDQogICAgICAgICAgfSk7DQogICAgICAgICAgLy8g6YeN5paw6I635Y+W5pWw5o2uDQogICAgICAgICAgYXdhaXQgdGhpcy5nZXRQZXJtaXNzaW9uTGlzdCgpDQogICAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnDQogICAgICAgICAgfSk7ICAgICAgICAgIA0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIC8qIOa3u+WKoOadg+mZkCAqLw0KICAgIGFkZFBlcm1pc3Npb24gKHR5cGUsaWQpIHsNCiAgICAgIC8vIOiuv+mXruadg+mZkCB0eXBlID0gMSDmjInpkq7mk43kvZzmnYPpmZAgdHlwZSA9IDINCiAgICAgIHRoaXMuZm9ybURhdGEucGlkID0gaWQNCiAgICAgIHRoaXMuZm9ybURhdGEudHlwZSA9IHR5cGUNCiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IHRydWUNCiAgICB9LA0KICAgIC8qIOaPkOS6pOaVsOaNriAqLw0KICAgIGJ0bk9LICgpIHsNCiAgICAgIHRoaXMuJHJlZnMucGVyRm9ybS52YWxpZGF0ZShhc3luYyBpc09rID0+IHsNCiAgICAgICAgaWYoaXNPaykgew0KICAgICAgICAgIC8vIOaPkOS6pOaVsOaNrg0KICAgICAgICAgIGlmKHRoaXMuZm9ybURhdGEuaWQpIHsNCiAgICAgICAgICAgIC8vIOe8lui+kQ0KICAgICAgICAgICAgY29uc29sZS5sb2coJyoqKue8lui+keiwg+ivleS4rSoqKip0aGlzLmZvcm1EYXRhKioqJyx0aGlzLmZvcm1EYXRhKQ0KICAgICAgICAgICAgYXdhaXQgdXBkYXRlUGVybWlzc2lvbih0aGlzLmZvcm1EYXRhKQ0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmnYPpmZDkv67mlLnmiJDlip/vvIEnKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyAg5re75YqgDQogICAgICAgICAgICBjb25zb2xlLmxvZygnKioq5re75Yqg6LCD6K+V5LitKioqKnRoaXMuZm9ybURhdGEqKionLHRoaXMuZm9ybURhdGEpDQogICAgICAgICAgICBhd2FpdCBhZGRQZXJtaXNzaW9uKHRoaXMuZm9ybURhdGEpDQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+adg+mZkOa3u+WKoOaIkOWKn++8gScpDQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIOmHjeaWsOiOt+WPluaVsOaNrg0KICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0UGVybWlzc2lvbkxpc3QoKQ0KICAgICAgICAgIHRoaXMuYnRuQ2FuY2VsKCkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qIOe8lui+keadg+mZkCAqLw0KICAgIGFzeW5jIGVkaXRQZXJzc2lvbiAoaWQpIHsNCiAgICAgIHRoaXMuZm9ybURhdGEgPSBhd2FpdCBnZXRQZXJtaXNzaW9uRGV0YWlsKGlkKQ0KICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZQ0KICAgIH0sDQogICAgLyog5Y+W5raI5by55qGGICovDQogICAgYnRuQ2FuY2VsICgpIHsNCiAgICAgIC8vIOihqOWNlemHjee9rg0KICAgICAgdGhpcy5mb3JtRGF0YSA9IHsNCiAgICAgICAgbmFtZTogJycsIC8vIOWQjeensA0KICAgICAgICBjb2RlOiAnJywgLy8g5qCH6K+GDQogICAgICAgIGRlc2NyaXB0aW9uOiAnJywgLy8g5o+P6L+wDQogICAgICAgIHR5cGU6ICcnLCAvLyDnsbvlnosg6K+l57G75Z6LIOS4jemcgOimgeaYvuekuiDlm6DkuLrngrnlh7vmt7vliqDnmoTml7blgJnlt7Lnu4/nn6XpgZPnsbvlnovkuoYNCiAgICAgICAgcGlkOiAnJywgLy8g5Zug5Li65YGa55qE5piv5qCRIOmcgOimgeefpemBk+a3u+WKoOWIsOWTquS4quiKgueCueS4i+S6hg0KICAgICAgICBlblZpc2libGU6ICcwJyAvLyDlvIDlkK8NCiAgICAgIH0NCiAgICAgIC8vIHRoaXMuJHJlZnMucGVyRm9ybS5yZXNldEZpZWxkcygpDQogICAgICAvLyDnp7vpmaTooajljZXmoKHpqozop4TliJkNCiAgICAgIHRoaXMuJHJlZnMucGVyRm9ybS5jbGVhclZhbGlkYXRlKCkNCiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlDQogICAgfQ0KICB9LA0KICANCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/permission","sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <div class=\"app-container\">\r\n      <pageTools>\r\n        <template v-slot:after>\r\n          <el-button type=\"primary\" size=\"small\" @click=\"addPermission(1,'0')\">添加权限</el-button>\r\n        </template>\r\n      </pageTools>\r\n      <!-- 表格 -->\r\n      <el-table :data=\"list\" row-key=\"id\">\r\n        <el-table-column label=\"菜单名称\" align=\"center\" prop=\"name\">\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"权限标识\" align=\"center\" prop=\"code\">\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"描述\" align=\"center\" prop=\"description\">\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"操作\" align=\"center\">\r\n          <template slot-scope=\"scoped\">\r\n            <el-button type=\"text\" @click=\"addPermission(2,scoped.row.id)\" v-if=\"scoped.row.type === 1\">添加</el-button>\r\n            <el-button type=\"text\" @click=\"editPerssion(scoped.row.id)\">编辑</el-button>\r\n            <el-button type=\"text\" @click=\"btnDelete(scoped.row.id)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- /表格 -->\r\n\r\n      <!-- 新增编辑弹层 -->\r\n      <el-dialog :title=\"`${titleText}权限点`\" :visible=\"showDialog\" @close=\"btnCancel\">\r\n      <!-- 表单 -->\r\n      <el-form ref=\"perForm\" :model=\"formData\" :rules=\"rules\" label-width=\"120px\">\r\n          <el-form-item label=\"权限名称\" prop=\"name\">\r\n            <el-input v-model=\"formData.name\" style=\"width:90%\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"权限标识\" prop=\"code\">\r\n            <el-input v-model=\"formData.code\" style=\"width:90%\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"权限描述\">\r\n            <el-input v-model=\"formData.description\" style=\"width:90%\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"开启\">\r\n            <el-switch\r\n              v-model=\"formData.enVisible\"\r\n              active-value=\"1\"\r\n              inactive-value=\"0\"\r\n            />\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-row slot=\"footer\" type=\"flex\" justify=\"center\">\r\n          <el-col :span=\"6\">\r\n            <el-button size=\"small\" type=\"primary\" @click=\"btnOK\">确定</el-button>\r\n            <el-button size=\"small\" @click=\"btnCancel\">取消</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-dialog>\r\n      <!-- /新增编辑弹层 -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getPermissionList,addPermission,updatePermission,delPermission,getPermissionDetail} from '@/api/permission'\r\nimport {tranListToTreeData} from '@/utils/index'\r\nexport default {\r\n  data() {\r\n    return {\r\n      list:[],\r\n      showDialog: false, // 弹层控制\r\n      formData: {\r\n        name: '', // 名称\r\n        code: '', // 标识\r\n        description: '', // 描述\r\n        type: '', // 类型 该类型 不需要显示 因为点击添加的时候已经知道类型了\r\n        pid: '', // 因为做的是树 需要知道添加到哪个节点下了\r\n        enVisible: '0' // 开启\r\n      },\r\n      rules: {\r\n        name:[\r\n          {required: true, message:'名字不能为空！', trigger: 'blur'}\r\n        ],\r\n        code:[\r\n          {required: true, message:'标识不能为空！', trigger: 'blur'}\r\n        ],\r\n      },\r\n      perData:[],\r\n      defaultProps: {}\r\n    }\r\n  },\r\n  created(){\r\n    this.getPermissionList()\r\n  },\r\n  computed: {\r\n    titleText() {\r\n      return this.formData.id ? '编辑' : '新增'\r\n    }\r\n  },\r\n  methods: {\r\n    async getPermissionList() {\r\n      this.list = tranListToTreeData(await getPermissionList(),0)\r\n    },\r\n    /* 删除权限 */\r\n    btnDelete (id) {\r\n       this.$confirm('此操作将永久删除该权限, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(async () => {\r\n          await delPermission(id)\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });\r\n          // 重新获取数据\r\n          await this.getPermissionList()\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });          \r\n        });\r\n    },\r\n    /* 添加权限 */\r\n    addPermission (type,id) {\r\n      // 访问权限 type = 1 按钮操作权限 type = 2\r\n      this.formData.pid = id\r\n      this.formData.type = type\r\n      this.showDialog = true\r\n    },\r\n    /* 提交数据 */\r\n    btnOK () {\r\n      this.$refs.perForm.validate(async isOk => {\r\n        if(isOk) {\r\n          // 提交数据\r\n          if(this.formData.id) {\r\n            // 编辑\r\n            console.log('***编辑调试中****this.formData***',this.formData)\r\n            await updatePermission(this.formData)\r\n            this.$message.success('权限修改成功！')\r\n          } else {\r\n            //  添加\r\n            console.log('***添加调试中****this.formData***',this.formData)\r\n            await addPermission(this.formData)\r\n            this.$message.success('权限添加成功！')\r\n          }\r\n          // 重新获取数据\r\n          await this.getPermissionList()\r\n          this.btnCancel()\r\n        }\r\n      })\r\n    },\r\n    /* 编辑权限 */\r\n    async editPerssion (id) {\r\n      this.formData = await getPermissionDetail(id)\r\n      this.showDialog = true\r\n    },\r\n    /* 取消弹框 */\r\n    btnCancel () {\r\n      // 表单重置\r\n      this.formData = {\r\n        name: '', // 名称\r\n        code: '', // 标识\r\n        description: '', // 描述\r\n        type: '', // 类型 该类型 不需要显示 因为点击添加的时候已经知道类型了\r\n        pid: '', // 因为做的是树 需要知道添加到哪个节点下了\r\n        enVisible: '0' // 开启\r\n      }\r\n      // this.$refs.perForm.resetFields()\r\n      // 移除表单校验规则\r\n      this.$refs.perForm.clearValidate()\r\n      this.showDialog = false\r\n    }\r\n  },\r\n  \r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}