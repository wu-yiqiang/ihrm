{"remainingRequest":"C:\\Users\\windows\\project\\ihrm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\project\\ihrm\\src\\views\\employees\\components\\assign-role.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\project\\ihrm\\src\\views\\employees\\components\\assign-role.vue","mtime":1617162182540},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldFJvbGVMaXN0fSBmcm9tICdAL2FwaS9zZXR0aW5nJw0KaW1wb3J0IHtnZXRVc2VyRGV0YWlsQnlJZH0gZnJvbSAnQC9hcGkvdXNlcicNCmltcG9ydCB7YXNzaWduUm9sZXN9IGZyb20gJ0AvYXBpL2VtcGxveWVlcycNCmV4cG9ydCBkZWZhdWx0IHsNCiAgcHJvcHM6IHsNCiAgICBzaG93Um9sZURpYWxvZzogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICAvLyDnlKjmiLfnmoRpZCDnlKjmnaXmn6Xor6LlvZPliY3nlKjmiLfnmoTop5LoibLkv6Hmga8NCiAgICB1c2VySWQ6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6IG51bGwNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgcm9sZUlkczpbXQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFJvbGVMaXN0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8qIOiOt+WPluaJgOacieinkuiJsiAqLw0KICAgIGFzeW5jIGdldFJvbGVMaXN0KCkgew0KICAgICAgY29uc3Qge3Jvd3N9ID0gYXdhaXQgZ2V0Um9sZUxpc3Qoe3BhZ2U6MSxwYWdlc2l6ZToyMH0pDQogICAgICB0aGlzLmxpc3QgPSByb3dzDQogICAgfSwNCiAgICBhc3luYyBnZXRVc2VyRGV0YWlsQnlJZChpZCkgew0KICAgICAgY29uc3QgeyByb2xlSWRzIH09IGF3YWl0IGdldFVzZXJEZXRhaWxCeUlkKGlkKQ0KICAgICAgdGhpcy5yb2xlSWRzID0gcm9sZUlkcw0KICAgIH0sDQogICAgYXN5bmMgYnRuT2soKSB7DQogICAgICB0cnkgew0KICAgICAgICBhd2FpdCBhc3NpZ25Sb2xlcyh7aWQ6dGhpcy51c2VySWQscm9sZUlkczogdGhpcy5yb2xlSWRzfSkNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmm7TmlrDop5LoibLmnYPpmZDmiJDlip/vvIEnKQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pu05paw6KeS6Imy5p2D6ZmQ5aSx6LSl77yBJykNCiAgICAgIH0NCiAgICAgIHRoaXMuYnRuQ2FuY2VsKCkNCiAgICB9LA0KICAgIGJ0bkNhbmNlbCgpIHsNCiAgICAgIC8vIOa4hemZpOW8ueeql+aVsOaNrg0KICAgICAgdGhpcy5yb2xlSWRzID0gW10NCiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpzaG93Um9sZURpYWxvZycsIGZhbHNlKSANCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["assign-role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"assign-role.vue","sourceRoot":"src/views/employees/components","sourcesContent":["<template>\r\n  <el-dialog title=\"分配角色\" :visible=\"showRoleDialog\" @close=\"btnCancel\">\r\n    <!-- el-checkbox-group选中的是 当前用户所拥有的角色  需要绑定 当前用户拥有的角色-->\r\n    <!-- <el-checkbox-group> -->\r\n      <!-- 选项 -->\r\n      <el-checkbox v-for=\"item in list\" :key='item.id' label=\"item.id\">{{item.name}}</el-checkbox>\r\n    <!-- </el-checkbox-group> -->\r\n    <el-row slot=\"footer\" type=\"flex\" justify=\"center\">\r\n      <el-col :span=\"6\">\r\n        <el-button type=\"primary\" size=\"small\" @click='btnOk'>确定</el-button>\r\n        <el-button size=\"small\" @click=\"btnCancel\">取消</el-button>\r\n      </el-col>\r\n    </el-row>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {getRoleList} from '@/api/setting'\r\nimport {getUserDetailById} from '@/api/user'\r\nimport {assignRoles} from '@/api/employees'\r\nexport default {\r\n  props: {\r\n    showRoleDialog: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 用户的id 用来查询当前用户的角色信息\r\n    userId: {\r\n      type: String,\r\n      default: null\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      list: [],\r\n      roleIds:[]\r\n    }\r\n  },\r\n  created() {\r\n    this.getRoleList()\r\n  },\r\n  methods: {\r\n    /* 获取所有角色 */\r\n    async getRoleList() {\r\n      const {rows} = await getRoleList({page:1,pagesize:20})\r\n      this.list = rows\r\n    },\r\n    async getUserDetailById(id) {\r\n      const { roleIds }= await getUserDetailById(id)\r\n      this.roleIds = roleIds\r\n    },\r\n    async btnOk() {\r\n      try {\r\n        await assignRoles({id:this.userId,roleIds: this.roleIds})\r\n        this.$message.success('更新角色权限成功！')\r\n      } catch (error) {\r\n        this.$message.error('更新角色权限失败！')\r\n      }\r\n      this.btnCancel()\r\n    },\r\n    btnCancel() {\r\n      // 清除弹窗数据\r\n      this.roleIds = []\r\n      this.$emit('update:showRoleDialog', false) \r\n    }\r\n  }\r\n}\r\n</script>"]}]}