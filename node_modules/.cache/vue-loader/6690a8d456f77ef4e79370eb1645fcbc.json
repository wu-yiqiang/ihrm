{"remainingRequest":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\Project\\ihrm\\src\\views\\employees\\components\\add-employee.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\Project\\ihrm\\src\\views\\employees\\components\\add-employee.vue","mtime":1616824358539},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldERlcGFydG1lbnRzfSBmcm9tICdAL2FwaS9kZXBhcnRtZW50cycNCmltcG9ydCB7dHJhbkxpc3RUb1RyZWVEYXRhfSBmcm9tICdAL3V0aWxzJw0KaW1wb3J0IEVtcGxveWVlRW51bSBmcm9tICdAL2FwaS9jb25zdGFudC9lbXBsb3llZXMnDQppbXBvcnQge2FkZEVtcGxveWVlfSBmcm9tICdAL2FwaS9lbXBsb3llZXMnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdhZGRFbXBsb3llZScsDQogIHByb3BzOiB7DQogICAgc2hvd0RpYWxvZzogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBFbXBsb3llZUVudW0sDQogICAgICAgIGZvcm1EYXRhOiB7DQogICAgICAgIHVzZXJuYW1lOiAnJywNCiAgICAgICAgbW9iaWxlOiAnJywNCiAgICAgICAgZm9ybU9mRW1wbG95bWVudDogJycsDQogICAgICAgIHdvcmtOdW1iZXI6ICcnLA0KICAgICAgICBkZXBhcnRtZW50TmFtZTogJycsDQogICAgICAgIHRpbWVPZkVudHJ5OiAnJywNCiAgICAgICAgY29ycmVjdGlvblRpbWU6ICcnDQogICAgICB9LA0KICAgICAgdHJlZURhdGU6IFtdLA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgdXNlcm5hbWU6Ww0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSxtZXNzYWdlOiAn5ZGY5bel5ZCN5a2X5LiN6IO95Li656m6IScsdHJpZ2dlcjogJ2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgICBtb2JpbGU6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsbWVzc2FnZTogJ+iBlOezu+WPt+eggeS4jeiDveS4uuepuiEnLHRyaWdnZXI6ICdibHVyJ30sDQogICAgICAgICAge3BhdHRlcm46IC9eMVszLTldXGR7OX0kLyxtZXNzYWdlOifnlLXor53lj7fnoIHmoLzlvI/kuI3mraPnoa4nLHRyaWdnZXI6J2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgICBmb3JtT2ZFbXBsb3ltZW50OiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLG1lc3NhZ2U6ICfogZjnlKjmlrnlvI/kuI3og73kuLrnqbohJyx0cmlnZ2VyOiAnYmx1cid9DQogICAgICAgIF0sDQogICAgICAgIHdvcmtOdW1iZXI6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsbWVzc2FnZTogJ+WRmOW3peW3peWPt+S4jeiDveS4uuepuiEnLHRyaWdnZXI6ICdibHVyJ30NCiAgICAgICAgXSwNCiAgICAgICAgZGVwYXJ0bWVudE5hbWU6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsbWVzc2FnZTogJ+aJgOWxnumDqOmXqOS4jeiDveS4uuepuiEnLHRyaWdnZXI6ICdjaGFuZ2UnfQ0KICAgICAgICBdLA0KICAgICAgICB0aW1lT2ZFbnRyeTogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSxtZXNzYWdlOiAn5YWl6IGM5pe26Ze05LiN6IO95Li656m6IScsdHJpZ2dlcjogJ2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgICBjb3JyZWN0aW9uVGltZTpbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLG1lc3NhZ2U6ICfovazmraPml7bpl7TkuI3og73kuLrnqbohJyx0cmlnZ2VyOiAnYmx1cid9DQogICAgICAgIF0NCiAgICAgIH0sDQogICAgICBzaG93VHJlZTogZmFsc2UNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAgLyog6I635Y+W57uE57uH5p625p6EICovDQogICAgYXN5bmMgZ2V0RGVwYXJ0bWVudHMgKCkgew0KICAgICAgY29uc3Qge2RlcHRzfSA9IGF3YWl0IGdldERlcGFydG1lbnRzKCkNCiAgICAgIHRoaXMudHJlZURhdGUgPSB0cmFuTGlzdFRvVHJlZURhdGEoZGVwdHMsJycpDQogICAgICB0aGlzLnNob3dUcmVlID0gdHJ1ZQ0KICAgIH0sDQogICAgc2VsZWN0IChub2RlKSB7DQogICAgICB0aGlzLmZvcm1EYXRhLmRlcGFydG1lbnROYW1lID0gbm9kZS5uYW1lDQogICAgICB0aGlzLnNob3dUcmVlID0gZmFsc2UNCiAgICB9LA0KICAgIC8qIOaPkOS6pOihqOWNlSAqLw0KICAgIGJ0bk9rICgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZm9ybURhdGFGb3JtLnZhbGlkYXRlKCBhc3luYyAodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgLy8g5o+Q5Lqk5pWw5o2uDQogICAgICAgICAgYXdhaXQgYWRkRW1wbG95ZWUodGhpcy5mb3JtRGF0YSkNCiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1EYXRhRm9ybS5yZXNldEZpZWxkcygpDQogICAgICAgICAgdGhpcy4kcmVmcy5mb3JtRGF0YUZvcm0uY2xlYXJWYWxpZGF0ZSgpDQogICAgICAgICAgdGhpcy4kcGFyZW50LmdldEVtcGxveWVlc0xpc3RzKCkNCiAgICAgICAgICB0aGlzLmJ0bkNhbigpDQogICAgICAgIH0gDQogICAgICB9KQ0KICAgIH0sDQogICAgLyog5Y+W5raI5o+Q5LqkICovDQogICAgYnRuQ2FuY2VsICgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZm9ybURhdGFGb3JtLnJlc2V0RmllbGRzKCkNCiAgICAgIHRoaXMuJHJlZnMuZm9ybURhdGFGb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNob3dEaWFsb2cnLCBmYWxzZSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["add-employee.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-employee.vue","sourceRoot":"src/views/employees/components","sourcesContent":["<template>\r\n  <el-dialog title=\"新增员工\" :visible=\"showDialog\" @close=\"btnCancel\">\r\n    <!-- 表单 -->\r\n    <el-form :model=\"formData\" label-width=\"120px\" :rules=\"rules\" ref=\"formDataForm\">\r\n      <el-form-item label=\"姓名\" prop=\"username\">\r\n        <el-input style=\"width:50%\" placeholder=\"请输入姓名\" v-model=\"formData.username\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"手机\" prop=\"mobile\">\r\n        <el-input style=\"width:50%\" placeholder=\"请输入手机号\" v-model=\"formData.mobile\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"入职时间\" prop=\"timeOfEntry\">\r\n        <el-date-picker style=\"width:50%\" placeholder=\"请选择入职时间\" v-model=\"formData.timeOfEntry\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"聘用形式\" prop=\"formOfEmployment\">\r\n        <el-select style=\"width:50%\" placeholder=\"请选择\" v-model=\"formData.formOfEmployment\">\r\n          <el-option v-for=\"item in EmployeeEnum.hireType\" :key=\"item.id\" :label=\"item.value\" :value=\"item.id\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"工号\" prop=\"workNumber\">\r\n        <el-input style=\"width:50%\" placeholder=\"请输入工号\" v-model=\"formData.workNumber\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"部门\" prop=\"departmentName\">\r\n        <el-input style=\"width:50%\" placeholder=\"请选择部门\" v-model=\"formData.departmentName\" @focus=\"getDepartments\"/>\r\n        <el-tree :data=\"treeDate\" :props=\"{label:'name'}\" default-expand-all v-if=\"showTree\" @node-click=\"select\"></el-tree>\r\n      </el-form-item>\r\n      <el-form-item label=\"转正时间\" prop=\"correctionTime\">\r\n        <el-date-picker style=\"width:50%\" placeholder=\"请选择转正时间\" v-model=\"formData.correctionTime\"/>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- footer插槽 -->\r\n    <template v-slot:footer>\r\n      <el-row type=\"flex\" justify=\"center\">\r\n        <el-col :span=\"6\">\r\n          <el-button size=\"small\" @click=\"btnCancel\">取消</el-button>\r\n          <el-button type=\"primary\" size=\"small\" @click=\"btnOk\">确定</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {getDepartments} from '@/api/departments'\r\nimport {tranListToTreeData} from '@/utils'\r\nimport EmployeeEnum from '@/api/constant/employees'\r\nimport {addEmployee} from '@/api/employees'\r\nexport default {\r\n  name: 'addEmployee',\r\n  props: {\r\n    showDialog: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      EmployeeEnum,\r\n        formData: {\r\n        username: '',\r\n        mobile: '',\r\n        formOfEmployment: '',\r\n        workNumber: '',\r\n        departmentName: '',\r\n        timeOfEntry: '',\r\n        correctionTime: ''\r\n      },\r\n      treeDate: [],\r\n      rules: {\r\n        username:[\r\n          {required: true,message: '员工名字不能为空!',trigger: 'blur'}\r\n        ],\r\n        mobile: [\r\n          {required: true,message: '联系号码不能为空!',trigger: 'blur'},\r\n          {pattern: /^1[3-9]\\d{9}$/,message:'电话号码格式不正确',trigger:'blur'}\r\n        ],\r\n        formOfEmployment: [\r\n          {required: true,message: '聘用方式不能为空!',trigger: 'blur'}\r\n        ],\r\n        workNumber: [\r\n          {required: true,message: '员工工号不能为空!',trigger: 'blur'}\r\n        ],\r\n        departmentName: [\r\n          {required: true,message: '所属部门不能为空!',trigger: 'change'}\r\n        ],\r\n        timeOfEntry: [\r\n          {required: true,message: '入职时间不能为空!',trigger: 'blur'}\r\n        ],\r\n        correctionTime:[\r\n          {required: true,message: '转正时间不能为空!',trigger: 'blur'}\r\n        ]\r\n      },\r\n      showTree: false\r\n    }\r\n  },\r\n  methods: {\r\n     /* 获取组织架构 */\r\n    async getDepartments () {\r\n      const {depts} = await getDepartments()\r\n      this.treeDate = tranListToTreeData(depts,'')\r\n      this.showTree = true\r\n    },\r\n    select (node) {\r\n      this.formData.departmentName = node.name\r\n      this.showTree = false\r\n    },\r\n    /* 提交表单 */\r\n    btnOk () {\r\n      this.$refs.formDataForm.validate( async (valid) => {\r\n        if (valid) {\r\n          // 提交数据\r\n          await addEmployee(this.formData)\r\n          this.$refs.formDataForm.resetFields()\r\n          this.$refs.formDataForm.clearValidate()\r\n          this.$parent.getEmployeesLists()\r\n          this.btnCan()\r\n        } \r\n      })\r\n    },\r\n    /* 取消提交 */\r\n    btnCancel () {\r\n      this.$refs.formDataForm.resetFields()\r\n      this.$refs.formDataForm.clearValidate()\r\n      this.$emit('update:showDialog', false)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}