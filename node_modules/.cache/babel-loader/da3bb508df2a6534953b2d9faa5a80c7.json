{"remainingRequest":"C:\\Users\\windows\\project\\ihrm\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\windows\\project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\windows\\project\\ihrm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\windows\\project\\ihrm\\src\\views\\employees\\components\\assign-role.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\windows\\project\\ihrm\\src\\views\\employees\\components\\assign-role.vue","mtime":1617162182540},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL3dpbmRvd3MvcHJvamVjdC9paHJtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRSb2xlTGlzdCBhcyBfZ2V0Um9sZUxpc3QgfSBmcm9tICdAL2FwaS9zZXR0aW5nJzsKaW1wb3J0IHsgZ2V0VXNlckRldGFpbEJ5SWQgYXMgX2dldFVzZXJEZXRhaWxCeUlkIH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCB7IGFzc2lnblJvbGVzIH0gZnJvbSAnQC9hcGkvZW1wbG95ZWVzJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBzaG93Um9sZURpYWxvZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIC8vIOeUqOaIt+eahGlkIOeUqOadpeafpeivouW9k+WJjeeUqOaIt+eahOinkuiJsuS/oeaBrwogICAgdXNlcklkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICByb2xlSWRzOiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFJvbGVMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKiDojrflj5bmiYDmnInop5LoibIgKi8KICAgIGdldFJvbGVMaXN0OiBmdW5jdGlvbiBnZXRSb2xlTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF95aWVsZCRfZ2V0Um9sZUxpc3QsIHJvd3M7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF9nZXRSb2xlTGlzdCh7CiAgICAgICAgICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICAgICAgICAgIHBhZ2VzaXplOiAyMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRfZ2V0Um9sZUxpc3QgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcm93cyA9IF95aWVsZCRfZ2V0Um9sZUxpc3Qucm93czsKICAgICAgICAgICAgICAgIF90aGlzLmxpc3QgPSByb3dzOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0VXNlckRldGFpbEJ5SWQ6IGZ1bmN0aW9uIGdldFVzZXJEZXRhaWxCeUlkKGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF95aWVsZCRfZ2V0VXNlckRldGFpbCwgcm9sZUlkczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfZ2V0VXNlckRldGFpbEJ5SWQoaWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfeWllbGQkX2dldFVzZXJEZXRhaWwgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIHJvbGVJZHMgPSBfeWllbGQkX2dldFVzZXJEZXRhaWwucm9sZUlkczsKICAgICAgICAgICAgICAgIF90aGlzMi5yb2xlSWRzID0gcm9sZUlkczsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYnRuT2s6IGZ1bmN0aW9uIGJ0bk9rKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXNzaWduUm9sZXMoewogICAgICAgICAgICAgICAgICBpZDogX3RoaXMzLnVzZXJJZCwKICAgICAgICAgICAgICAgICAgcm9sZUlkczogX3RoaXMzLnJvbGVJZHMKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfdGhpczMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pu05paw6KeS6Imy5p2D6ZmQ5oiQ5Yqf77yBJyk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UuZXJyb3IoJ+abtOaWsOinkuiJsuadg+mZkOWksei0pe+8gScpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfdGhpczMuYnRuQ2FuY2VsKCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbMCwgNl1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYnRuQ2FuY2VsOiBmdW5jdGlvbiBidG5DYW5jZWwoKSB7CiAgICAgIC8vIOa4hemZpOW8ueeql+aVsOaNrgogICAgICB0aGlzLnJvbGVJZHMgPSBbXTsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNob3dSb2xlRGlhbG9nJywgZmFsc2UpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["assign-role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAiBA,SAAA,WAAA,IAAA,YAAA,QAAA,eAAA;AACA,SAAA,iBAAA,IAAA,kBAAA,QAAA,YAAA;AACA,SAAA,WAAA,QAAA,iBAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,cAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AANA,GADA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAIA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA;AACA,SAAA,WAAA;AACA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,WAFA,yBAEA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,YAAA,CAAA;AAAA,kBAAA,IAAA,EAAA,CAAA;AAAA,kBAAA,QAAA,EAAA;AAAA,iBAAA,CADA;;AAAA;AAAA;AACA,gBAAA,IADA,uBACA,IADA;AAEA,gBAAA,KAAA,CAAA,IAAA,GAAA,IAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,KALA;AAMA,IAAA,iBANA,6BAMA,EANA,EAMA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,kBAAA,CAAA,EAAA,CADA;;AAAA;AAAA;AACA,gBAAA,OADA,yBACA,OADA;AAEA,gBAAA,MAAA,CAAA,OAAA,GAAA,OAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,KATA;AAUA,IAAA,KAVA,mBAUA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,WAAA,CAAA;AAAA,kBAAA,EAAA,EAAA,MAAA,CAAA,MAAA;AAAA,kBAAA,OAAA,EAAA,MAAA,CAAA;AAAA,iBAAA,CAFA;;AAAA;AAGA,gBAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,WAAA;;AAHA;AAAA;;AAAA;AAAA;AAAA;;AAKA,gBAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,WAAA;;AALA;AAOA,gBAAA,MAAA,CAAA,SAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KAlBA;AAmBA,IAAA,SAnBA,uBAmBA;AACA;AACA,WAAA,OAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,uBAAA,EAAA,KAAA;AACA;AAvBA;AArBA,CAAA","sourcesContent":["<template>\r\n  <el-dialog title=\"分配角色\" :visible=\"showRoleDialog\" @close=\"btnCancel\">\r\n    <!-- el-checkbox-group选中的是 当前用户所拥有的角色  需要绑定 当前用户拥有的角色-->\r\n    <!-- <el-checkbox-group> -->\r\n      <!-- 选项 -->\r\n      <el-checkbox v-for=\"item in list\" :key='item.id' label=\"item.id\">{{item.name}}</el-checkbox>\r\n    <!-- </el-checkbox-group> -->\r\n    <el-row slot=\"footer\" type=\"flex\" justify=\"center\">\r\n      <el-col :span=\"6\">\r\n        <el-button type=\"primary\" size=\"small\" @click='btnOk'>确定</el-button>\r\n        <el-button size=\"small\" @click=\"btnCancel\">取消</el-button>\r\n      </el-col>\r\n    </el-row>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {getRoleList} from '@/api/setting'\r\nimport {getUserDetailById} from '@/api/user'\r\nimport {assignRoles} from '@/api/employees'\r\nexport default {\r\n  props: {\r\n    showRoleDialog: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 用户的id 用来查询当前用户的角色信息\r\n    userId: {\r\n      type: String,\r\n      default: null\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      list: [],\r\n      roleIds:[]\r\n    }\r\n  },\r\n  created() {\r\n    this.getRoleList()\r\n  },\r\n  methods: {\r\n    /* 获取所有角色 */\r\n    async getRoleList() {\r\n      const {rows} = await getRoleList({page:1,pagesize:20})\r\n      this.list = rows\r\n    },\r\n    async getUserDetailById(id) {\r\n      const { roleIds }= await getUserDetailById(id)\r\n      this.roleIds = roleIds\r\n    },\r\n    async btnOk() {\r\n      try {\r\n        await assignRoles({id:this.userId,roleIds: this.roleIds})\r\n        this.$message.success('更新角色权限成功！')\r\n      } catch (error) {\r\n        this.$message.error('更新角色权限失败！')\r\n      }\r\n      this.btnCancel()\r\n    },\r\n    btnCancel() {\r\n      // 清除弹窗数据\r\n      this.roleIds = []\r\n      this.$emit('update:showRoleDialog', false) \r\n    }\r\n  }\r\n}\r\n</script>"],"sourceRoot":"src/views/employees/components"}]}