{"remainingRequest":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\windows\\Project\\ihrm\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\windows\\Project\\ihrm\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\windows\\Project\\ihrm\\src\\store\\modules\\user.js","mtime":1616294269303},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvd2luZG93cy9Qcm9qZWN0L2locm0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvd2luZG93cy9Qcm9qZWN0L2locm0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiBhcyBfc2V0VG9rZW4sIHJlbW92ZVRva2VuIGFzIF9yZW1vdmVUb2tlbiwgc2V0VGltZVN0YW1wIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IHsgbG9naW4gYXMgX2xvZ2luIH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCB7IGdldFVzZXJJbmZvIGFzIF9nZXRVc2VySW5mbywgZ2V0VXNlckRldGFpbEJ5SWQgfSBmcm9tICdAL2FwaS91c2VyLmpzJzsKdmFyIHN0YXRlID0gewogIHRva2VuOiBnZXRUb2tlbigpLAogIHVzZXJJbmZvOiB7fSAvLyDnlKjmiLfln7rmnKzkv6Hmga8KCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgc2V0VG9rZW46IGZ1bmN0aW9uIHNldFRva2VuKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsgLy8gY2hhbmdlIGNhY2hlIHRva2VuCgogICAgX3NldFRva2VuKHRva2VuKTsKICB9LAogIHJlbW92ZVRva2VuOiBmdW5jdGlvbiByZW1vdmVUb2tlbihzdGF0ZSkgewogICAgLy8gcmVtb3ZlIHRva2VuCiAgICBzdGF0ZS50b2tlbiA9IG51bGw7CgogICAgX3JlbW92ZVRva2VuKCk7CiAgfSwKCiAgLyog6K6+572u55So5oi35L+h5oGvICovCiAgc2V0VXNlckluZm86IGZ1bmN0aW9uIHNldFVzZXJJbmZvKHN0YXRlLCByZXN1bHQpIHsKICAgIHN0YXRlLnVzZXJJbmZvID0gcmVzdWx0OwogIH0sCgogIC8qIOWIoOmZpOeUqOaIt+S/oeaBryAqLwogIHJlbW92ZVVzZXJJbmZvOiBmdW5jdGlvbiByZW1vdmVVc2VySW5mbyhzdGF0ZSkgewogICAgc3RhdGUudXNlckluZm8gPSB7fTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihjb250ZXh0LCBkYXRhKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2dpbihkYXRhKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRUb2tlbicsIHJlc3VsdCk7CiAgICAgICAgICAgICAgc2V0VGltZVN0YW1wKCk7IC8vIOiuvue9ruW9k+WJjeaXtumXtOaIswoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCgogIC8qIOiOt+WPlueUqOaIt+S/oeaBryAqLwogIGdldFVzZXJJbmZvOiBmdW5jdGlvbiBnZXRVc2VySW5mbyhjb250ZXh0KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIHJlc3VsdCwgYmFzZWluZm8sIGJhc2VSZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfZ2V0VXNlckluZm8oKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGdldFVzZXJEZXRhaWxCeUlkKHJlc3VsdC51c2VySWQpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGJhc2VpbmZvID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgYmFzZVJlc3VsdCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmVzdWx0KSwgYmFzZWluZm8pOwogICAgICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdzZXRVc2VySW5mbycsIGJhc2VSZXN1bHQpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBiYXNlUmVzdWx0KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCgogIC8qIOmAgOWHuueZu+W9lSAqLwogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KGNvbnRleHQpIHsKICAgIC8vIOWIoOmZpHRva2VuCiAgICBjb250ZXh0LmNvbW1pdCgncmVtb3ZlVG9rZW4nKTsgLy8g5LiN5LuF5LuF5Yig6Zmk5LqGdnVleOS4reeahCDov5jliKDpmaTkuobnvJPlrZjkuK3nmoQKICAgIC8vIOWIoOmZpOeUqOaIt+i1hOaWmQoKICAgIGNvbnRleHQuY29tbWl0KCdyZW1vdmVVc2VySW5mbycpOyAvLyDliKDpmaTnlKjmiLfkv6Hmga8KICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc2FwY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["C:/Users/windows/Project/ihrm/src/store/modules/user.js"],"names":["getToken","setToken","removeToken","setTimeStamp","login","getUserInfo","getUserDetailById","state","token","userInfo","mutations","setUserInfo","result","removeUserInfo","actions","context","data","commit","userId","baseinfo","baseResult","logout","namesapced"],"mappings":";;;AAAA,SAAQA,QAAR,EAAiBC,QAAQ,IAARA,SAAjB,EAA0BC,WAAW,IAAXA,YAA1B,EAAsCC,YAAtC,QAAyD,cAAzD;AACA,SAASC,KAAK,IAALA,MAAT,QAAsB,YAAtB;AACA,SAAQC,WAAW,IAAXA,YAAR,EAAqBC,iBAArB,QAA6C,eAA7C;AACA,IAAMC,KAAK,GAAG;AACZC,EAAAA,KAAK,EAAER,QAAQ,EADH;AAEZS,EAAAA,QAAQ,EAAE,EAFE,CAEE;;AAFF,CAAd;AAIA,IAAMC,SAAS,GAAG;AAChBT,EAAAA,QADgB,oBACPM,KADO,EACAC,KADA,EACO;AACrBD,IAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd,CADqB,CAErB;;AACAP,IAAAA,SAAQ,CAACO,KAAD,CAAR;AACD,GALe;AAMhBN,EAAAA,WANgB,uBAMJK,KANI,EAMG;AACjB;AACAA,IAAAA,KAAK,CAACC,KAAN,GAAc,IAAd;;AACAN,IAAAA,YAAW;AACZ,GAVe;;AAWhB;AACAS,EAAAA,WAZgB,uBAYJJ,KAZI,EAYEK,MAZF,EAYU;AACxBL,IAAAA,KAAK,CAACE,QAAN,GAAiBG,MAAjB;AAED,GAfe;;AAgBhB;AACAC,EAAAA,cAjBgB,0BAiBDN,KAjBC,EAiBM;AACpBA,IAAAA,KAAK,CAACE,QAAN,GAAiB,EAAjB;AACD;AAnBe,CAAlB;AAqBA,IAAMK,OAAO,GAAG;AACRV,EAAAA,KADQ,iBACFW,OADE,EACMC,IADN,EACY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEHZ,MAAK,CAACY,IAAD,CAFF;;AAAA;AAElBJ,cAAAA,MAFkB;AAGxBG,cAAAA,OAAO,CAACE,MAAR,CAAe,UAAf,EAA2BL,MAA3B;AACAT,cAAAA,YAAY,GAJY,CAIT;;AAJS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKzB,GANa;;AAOd;AACME,EAAAA,WARQ,uBAQIU,OARJ,EAQa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACJV,YAAW,EADP;;AAAA;AACnBO,cAAAA,MADmB;AAAA;AAAA,qBAGFN,iBAAiB,CAACM,MAAM,CAACM,MAAR,CAHf;;AAAA;AAGnBC,cAAAA,QAHmB;AAInBC,cAAAA,UAJmB,mCAIFR,MAJE,GAIQO,QAJR;AAKzBJ,cAAAA,OAAO,CAACE,MAAR,CAAe,aAAf,EAA8BG,UAA9B;AALyB,gDAMlBA,UANkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAO1B,GAfa;;AAgBd;AACAC,EAAAA,MAjBc,kBAiBPN,OAjBO,EAiBE;AACd;AACAA,IAAAA,OAAO,CAACE,MAAR,CAAe,aAAf,EAFc,CAEgB;AAC9B;;AACAF,IAAAA,OAAO,CAACE,MAAR,CAAe,gBAAf,EAJc,CAImB;AAClC;AAtBa,CAAhB;AAwBA,eAAe;AACbK,EAAAA,UAAU,EAAE,IADC;AAEbf,EAAAA,KAAK,EAALA,KAFa;AAGbG,EAAAA,SAAS,EAATA,SAHa;AAIbI,EAAAA,OAAO,EAAPA;AAJa,CAAf","sourcesContent":["import {getToken,setToken,removeToken,setTimeStamp} from '@/utils/auth'\nimport { login } from '@/api/user'\nimport {getUserInfo, getUserDetailById} from '@/api/user.js'\nconst state = {\n  token: getToken(),\n  userInfo: {}  // 用户基本信息\n}\nconst mutations = {\n  setToken(state, token) {\n    state.token = token\n    // change cache token\n    setToken(token)\n  },\n  removeToken(state) {\n    // remove token\n    state.token = null\n    removeToken()\n  },\n  /* 设置用户信息 */\n  setUserInfo(state,result) {\n    state.userInfo = result\n    \n  },\n  /* 删除用户信息 */\n  removeUserInfo(state) {\n    state.userInfo = {}\n  }\n}\nconst actions = {\n  async login(context,data) {\n    // use login interface\n    const result = await login(data)\n    context.commit('setToken', result)\n    setTimeStamp() // 设置当前时间戳\n  },\n  /* 获取用户信息 */\n  async getUserInfo(context) {\n    const result = await getUserInfo()\n    // 获取用户详情\n    const baseinfo = await getUserDetailById(result.userId)\n    const baseResult = {...result,...baseinfo}\n    context.commit('setUserInfo', baseResult)\n    return baseResult\n  },\n  /* 退出登录 */\n  logout(context) {\n    // 删除token\n    context.commit('removeToken') // 不仅仅删除了vuex中的 还删除了缓存中的\n    // 删除用户资料\n    context.commit('removeUserInfo') // 删除用户信息\n  }\n}\nexport default {\n  namesapced: true,\n  state,\n  mutations,\n  actions\n}"]}]}