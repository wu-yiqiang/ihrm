{"remainingRequest":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\windows\\Project\\ihrm\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\windows\\Project\\ihrm\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\windows\\Project\\ihrm\\src\\store\\modules\\user.js","mtime":1616154988712},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\Project\\ihrm\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvd2luZG93cy9Qcm9qZWN0L2locm0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvd2luZG93cy9Qcm9qZWN0L2locm0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiBhcyBfc2V0VG9rZW4sIHJlbW92ZVRva2VuIGFzIF9yZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyBnZXRVc2VySW5mbyBhcyBfZ2V0VXNlckluZm8sIGdldFVzZXJEZXRhaWxCeUlkIH0gZnJvbSAnQC9hcGkvdXNlci5qcyc7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogZ2V0VG9rZW4oKSwKICB1c2VySW5mbzoge30gLy8g55So5oi35Z+65pys5L+h5oGvCgp9Owp2YXIgbXV0YXRpb25zID0gewogIHNldFRva2VuOiBmdW5jdGlvbiBzZXRUb2tlbihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47IC8vIGNoYW5nZSBjYWNoZSB0b2tlbgoKICAgIF9zZXRUb2tlbih0b2tlbik7CiAgfSwKICByZW1vdmVUb2tlbjogZnVuY3Rpb24gcmVtb3ZlVG9rZW4oc3RhdGUpIHsKICAgIC8vIHJlbW92ZSB0b2tlbgogICAgc3RhdGUudG9rZW4gPSBudWxsOwoKICAgIF9yZW1vdmVUb2tlbigpOwoKICAgIGNvbnNvbGUubG9nKCcqKirku6PnoIHosIPor5XkuK0qKionLCBzdGF0ZS51c2VySW5mbyk7CiAgfSwKCiAgLyog6K6+572u55So5oi35L+h5oGvICovCiAgc2V0VXNlckluZm86IGZ1bmN0aW9uIHNldFVzZXJJbmZvKHN0YXRlLCByZXN1bHQpIHsKICAgIHN0YXRlLnVzZXJJbmZvID0gcmVzdWx0OwogIH0sCgogIC8qIOWIoOmZpOeUqOaIt+S/oeaBryAqLwogIHJlbW92ZVVzZXJJbmZvOiBmdW5jdGlvbiByZW1vdmVVc2VySW5mbyhzdGF0ZSkgewogICAgc3RhdGUudXNlckluZm8gPSB7fTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihjb250ZXh0LCBkYXRhKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2dpbihkYXRhKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VG9rZW4nLCByZXN1bHQpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAoKICAvKiDojrflj5bnlKjmiLfkv6Hmga8gKi8KICBnZXRVc2VySW5mbzogZnVuY3Rpb24gZ2V0VXNlckluZm8oY29udGV4dCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciByZXN1bHQsIGJhc2VpbmZvLCBiYXNlUmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX2dldFVzZXJJbmZvKCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBnZXRVc2VyRGV0YWlsQnlJZChyZXN1bHQudXNlcklkKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBiYXNlaW5mbyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIGJhc2VSZXN1bHQgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJlc3VsdCksIGJhc2VpbmZvKTsKICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlckluZm8nLCBiYXNlUmVzdWx0KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgYmFzZVJlc3VsdCk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9LAoKICAvKiDpgIDlh7rnmbvlvZUgKi8KICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChjb250ZXh0KSB7CiAgICAvLyDliKDpmaR0b2tlbgogICAgY29udGV4dC5jb21taXQoJ3JlbW92ZVRva2VuJyk7IC8vIOS4jeS7heS7heWIoOmZpOS6hnZ1ZXjkuK3nmoQg6L+Y5Yig6Zmk5LqG57yT5a2Y5Lit55qECiAgICAvLyDliKDpmaTnlKjmiLfotYTmlpkKCiAgICBjb250ZXh0LmNvbW1pdCgncmVtb3ZlVXNlckluZm8nKTsgLy8g5Yig6Zmk55So5oi35L+h5oGvCiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNhcGNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["C:/Users/windows/Project/ihrm/src/store/modules/user.js"],"names":["getToken","setToken","removeToken","login","getUserInfo","getUserDetailById","state","token","userInfo","mutations","console","log","setUserInfo","result","removeUserInfo","actions","context","data","commit","userId","baseinfo","baseResult","logout","namesapced"],"mappings":";;;AAAA,SAAQA,QAAR,EAAiBC,QAAQ,IAARA,SAAjB,EAA0BC,WAAW,IAAXA,YAA1B,QAA4C,cAA5C;AACA,SAASC,KAAK,IAALA,MAAT,QAAsB,YAAtB;AACA,SAAQC,WAAW,IAAXA,YAAR,EAAqBC,iBAArB,QAA6C,eAA7C;AACA,IAAMC,KAAK,GAAG;AACZC,EAAAA,KAAK,EAAEP,QAAQ,EADH;AAEZQ,EAAAA,QAAQ,EAAE,EAFE,CAEE;;AAFF,CAAd;AAIA,IAAMC,SAAS,GAAG;AAChBR,EAAAA,QADgB,oBACPK,KADO,EACAC,KADA,EACO;AACrBD,IAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd,CADqB,CAErB;;AACAN,IAAAA,SAAQ,CAACM,KAAD,CAAR;AACD,GALe;AAMhBL,EAAAA,WANgB,uBAMJI,KANI,EAMG;AACjB;AACAA,IAAAA,KAAK,CAACC,KAAN,GAAc,IAAd;;AACAL,IAAAA,YAAW;;AACXQ,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BL,KAAK,CAACE,QAAjC;AACD,GAXe;;AAYhB;AACAI,EAAAA,WAbgB,uBAaJN,KAbI,EAaEO,MAbF,EAaU;AACxBP,IAAAA,KAAK,CAACE,QAAN,GAAiBK,MAAjB;AAED,GAhBe;;AAiBhB;AACAC,EAAAA,cAlBgB,0BAkBDR,KAlBC,EAkBM;AACpBA,IAAAA,KAAK,CAACE,QAAN,GAAiB,EAAjB;AACD;AApBe,CAAlB;AAsBA,IAAMO,OAAO,GAAG;AACRZ,EAAAA,KADQ,iBACFa,OADE,EACMC,IADN,EACY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEHd,MAAK,CAACc,IAAD,CAFF;;AAAA;AAElBJ,cAAAA,MAFkB;;AAGxB,kBAAIA,MAAJ,EAAY;AACVG,gBAAAA,OAAO,CAACE,MAAR,CAAe,UAAf,EAA2BL,MAA3B;AACD;;AALuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMzB,GAPa;;AAQd;AACMT,EAAAA,WATQ,uBASIY,OATJ,EASa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACJZ,YAAW,EADP;;AAAA;AACnBS,cAAAA,MADmB;AAAA;AAAA,qBAGFR,iBAAiB,CAACQ,MAAM,CAACM,MAAR,CAHf;;AAAA;AAGnBC,cAAAA,QAHmB;AAInBC,cAAAA,UAJmB,mCAIFR,MAJE,GAIQO,QAJR;AAKzBJ,cAAAA,OAAO,CAACE,MAAR,CAAe,aAAf,EAA8BG,UAA9B;AALyB,gDAMlBA,UANkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAO1B,GAhBa;;AAiBd;AACAC,EAAAA,MAlBc,kBAkBPN,OAlBO,EAkBE;AACd;AACAA,IAAAA,OAAO,CAACE,MAAR,CAAe,aAAf,EAFc,CAEgB;AAC9B;;AACAF,IAAAA,OAAO,CAACE,MAAR,CAAe,gBAAf,EAJc,CAImB;AAClC;AAvBa,CAAhB;AAyBA,eAAe;AACbK,EAAAA,UAAU,EAAE,IADC;AAEbjB,EAAAA,KAAK,EAALA,KAFa;AAGbG,EAAAA,SAAS,EAATA,SAHa;AAIbM,EAAAA,OAAO,EAAPA;AAJa,CAAf","sourcesContent":["import {getToken,setToken,removeToken} from '@/utils/auth'\nimport { login } from '@/api/user'\nimport {getUserInfo, getUserDetailById} from '@/api/user.js'\nconst state = {\n  token: getToken(),\n  userInfo: {}  // 用户基本信息\n}\nconst mutations = {\n  setToken(state, token) {\n    state.token = token\n    // change cache token\n    setToken(token)\n  },\n  removeToken(state) {\n    // remove token\n    state.token = null\n    removeToken()\n    console.log('***代码调试中***', state.userInfo)\n  },\n  /* 设置用户信息 */\n  setUserInfo(state,result) {\n    state.userInfo = result\n    \n  },\n  /* 删除用户信息 */\n  removeUserInfo(state) {\n    state.userInfo = {}\n  }\n}\nconst actions = {\n  async login(context,data) {\n    // use login interface\n    const result = await login(data)\n    if (result) {\n      context.commit('setToken', result)\n    }\n  },\n  /* 获取用户信息 */\n  async getUserInfo(context) {\n    const result = await getUserInfo()\n    // 获取用户详情\n    const baseinfo = await getUserDetailById(result.userId)\n    const baseResult = {...result,...baseinfo}\n    context.commit('setUserInfo', baseResult)\n    return baseResult\n  },\n  /* 退出登录 */\n  logout(context) {\n    // 删除token\n    context.commit('removeToken') // 不仅仅删除了vuex中的 还删除了缓存中的\n    // 删除用户资料\n    context.commit('removeUserInfo') // 删除用户信息\n  }\n}\nexport default {\n  namesapced: true,\n  state,\n  mutations,\n  actions\n}"]}]}