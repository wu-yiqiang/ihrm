{"remainingRequest":"C:\\Users\\windows\\project\\ihrm\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\windows\\project\\ihrm\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\windows\\project\\ihrm\\src\\permission.js","dependencies":[{"path":"C:\\Users\\windows\\project\\ihrm\\src\\permission.js","mtime":1617261201761},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\windows\\project\\ihrm\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL3dpbmRvd3MvcHJvamVjdC9paHJtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgbnByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7IC8vIGltcG9ydCBUaGUgcHJvZ3Jlc3MgYmFyCgppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsKdmFyIHdoaXRlTGlzdCA9IFsnL2xvZ2luJywgJy80MDQnXTsKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZnJvbSwgdG8sIG5leHQpIHsKICAgIHZhciBfeWllbGQkc3RvcmUkZGlzcGF0Y2gsIHJvbGVzLCByb3V0ZXM7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBucHJvZ3Jlc3Muc3RhcnQoKTsgLy8gc3RhcnQgVGhlIHByb2dyZXNzIGJhcgoKICAgICAgICAgICAgaWYgKCFzdG9yZS5nZXR0ZXJzLnRva2VuKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoISh0by5wYXRoID09ICdsb2dpbicpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG5leHQoJy8nKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGlmIChzdG9yZS5nZXR0ZXJzLnVzZXJJZCkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnZ2V0VXNlckluZm8nKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIF95aWVsZCRzdG9yZSRkaXNwYXRjaCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHJvbGVzID0gX3lpZWxkJHN0b3JlJGRpc3BhdGNoLnJvbGVzOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgncGVybWlzc2lvbi9maWx0ZXJSb3V0ZXInLCByb2xlcy5tZW51cyk7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgcm91dGVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcm91dGVyLmFkZFJvdXRlcyhyb3V0ZXMpOwogICAgICAgICAgICBjb25zb2xlLmxvZygnKioq6LCD6K+V5LitKioqKioqKicsIHJvdXRlcyk7CiAgICAgICAgICAgIG5leHQodG8ucGF0aCk7CgogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgbmV4dCgpOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgLy8gdHVybiB0byBsb2dpbiBwYWdlIG9yIDQwNCBwYWdlCiAgICAgICAgICAgIGlmICh3aGl0ZUxpc3QuaW5kZXhPZih0by5wYXRoKSAtIDEpIHsKICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgbnByb2dyZXNzLmRvbmUoKTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAoZnJvbSwgdG8sIG5leHQpIHsKICBucHJvZ3Jlc3MuZG9uZSgpOyAvLyB0aGUgcHJvZ3Jlc3MgaXMgZG9uZSAKfSk7"},{"version":3,"sources":["C:/Users/windows/project/ihrm/src/permission.js"],"names":["router","store","nprogress","whiteList","beforeEach","from","to","next","start","getters","token","path","userId","dispatch","roles","menus","routes","addRoutes","console","log","indexOf","done","afterEach"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,SAAP,MAAsB,WAAtB,C,CAAkC;;AAClC,OAAO,yBAAP;AACA,IAAMC,SAAS,GAAG,CAAC,QAAD,EAAW,MAAX,CAAlB;AACAH,MAAM,CAACI,UAAP;AAAA,qEAAmB,iBAAOC,IAAP,EAAaC,EAAb,EAAiBC,IAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACjBL,YAAAA,SAAS,CAACM,KAAV,GADiB,CACC;;AADD,iBAEbP,KAAK,CAACQ,OAAN,CAAcC,KAFD;AAAA;AAAA;AAAA;;AAAA,kBAGXJ,EAAE,CAACK,IAAH,IAAW,OAHA;AAAA;AAAA;AAAA;;AAIbJ,YAAAA,IAAI,CAAC,GAAD,CAAJ;AAJa;AAAA;;AAAA;AAAA,gBAMRN,KAAK,CAACQ,OAAN,CAAcG,MANN;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAOaX,KAAK,CAACY,QAAN,CAAe,aAAf,CAPb;;AAAA;AAAA;AAOHC,YAAAA,KAPG,yBAOHA,KAPG;AAAA;AAAA,mBASUb,KAAK,CAACY,QAAN,CAAe,yBAAf,EAA0CC,KAAK,CAACC,KAAhD,CATV;;AAAA;AASLC,YAAAA,MATK;AAUXhB,YAAAA,MAAM,CAACiB,SAAP,CAAiBD,MAAjB;AACAE,YAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BH,MAA7B;AACAT,YAAAA,IAAI,CAACD,EAAE,CAACK,IAAJ,CAAJ;;AAZW;AAcbJ,YAAAA,IAAI;;AAdS;AAAA;AAAA;;AAAA;AAiBf;AACA,gBAAIJ,SAAS,CAACiB,OAAV,CAAkBd,EAAE,CAACK,IAArB,IAA6B,CAAjC,EAAoC;AAClCJ,cAAAA,IAAI;AACL,aAFD,MAEO;AACLA,cAAAA,IAAI;AACL;;AAtBc;AAwBjBL,YAAAA,SAAS,CAACmB,IAAV;;AAxBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB;;AAAA;AAAA;AAAA;AAAA;AA0BArB,MAAM,CAACsB,SAAP,CAAiB,UAACjB,IAAD,EAAOC,EAAP,EAAWC,IAAX,EAAoB;AACnCL,EAAAA,SAAS,CAACmB,IAAV,GADmC,CAClB;AAClB,CAFD","sourcesContent":["import router from '@/router'\nimport store from '@/store'\nimport nprogress from 'nprogress' // import The progress bar\nimport 'nprogress/nprogress.css'\nconst whiteList = ['/login', '/404']\nrouter.beforeEach( async (from, to, next) => {\n  nprogress.start() // start The progress bar\n  if (store.getters.token) {\n    if (to.path == 'login') {\n      next('/')\n    } else {\n      if (!store.getters.userId) {\n        const { roles } = await store.dispatch('getUserInfo')\n        //筛选用户可用路由\n        const routes = await store.dispatch('permission/filterRouter', roles.menus)\n        router.addRoutes(routes)\n        console.log('***调试中*******', routes)\n        next(to.path)\n      }\n      next()\n    }\n  } else {\n    // turn to login page or 404 page\n    if (whiteList.indexOf(to.path)  -1) {\n      next()\n    } else {    \n      next()\n    }\n  }\n  nprogress.done()\n})\nrouter.afterEach((from, to, next) => {\n  nprogress.done() // the progress is done \n})"]}]}